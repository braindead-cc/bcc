arch: x86_64
image: alpine/latest
packages:
        - meson
        - scdoc
        - tcl
        - gcc
        - binutils
        - xz
        - ncurses
sources:
        - https://git.sr.ht/~kiedtl/lbf.git
tasks:
        - prepare: |
                cd lbf
                meson build
        - build: |
                cd lbf
                ninja -C build
        - test: |
                cd lbf/tests
                ./test.tcl
        - artifacts: |
                cd lbf
                scripts/dist-src
                scripts/dist-bin
                mv lbf-*-bin.tar.xz lbf-bin.tar.xz
                mv lbf-*-src.tar.xz lbf-src.tar.xz
artifacts:
        - lbf/lbf-bin.tar.xz
        - lbf/lbf-src.tar.xz
